<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8" /> <title>Quiz Buzzer Pro</title> <meta name="viewport" content="width=device-width, initial-scale=1" /> <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script> <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:700,400&display=swap" /> <style> :root { --main-bg: #262e46; --primary: #3b8bee; --accent: #ffe05b; --danger: #e94f37; --radius: 16px; } html, body { margin:0; padding:0; height:100%; font-family:'Montserrat', Arial, sans-serif; background: var(--main-bg); color:#fff; user-select:none; } body { display: flex; flex-direction: column; min-height: 100vh; align-items: center; justify-content: flex-start; padding: 12px; } main { flex-grow: 1; width: 100%; max-width: 720px; } header, footer { width: 100%; max-width: 720px; text-align: center; font-weight: 700; letter-spacing: 0.1em; color: var(--accent); padding: 12px 0; } footer { margin-top: auto; } .page { display: none; padding: 18px 12px; box-sizing: border-box; width: 100%; } .show { display: block; } h1, h2 { font-weight: 700; margin-bottom: 20px; text-align: center; } input[type=text], input[type=password], input[type=email], input[type=file] { font-size: 1.2em; padding: 10px 16px; border-radius: var(--radius); border: none; width: 100%; max-width: 420px; margin: 10px auto 18px auto; display: block; box-sizing: border-box; text-align: center; background: #344365; color: #fff; } input::placeholder { color: #bac3e6; } button { font-size: 1.2em; border-radius: 40px; background: var(--primary); color: #fff; font-weight: 700; border: none; padding: 14px 40px; margin: 16px auto; cursor: pointer; width: 100%; max-width: 420px; box-shadow: 0 6px 12px #2554a1a1; user-select:none; transition: background 0.2s ease; display: block; } button:hover:not(:disabled) { background: var(--accent); color: #232323; } button:disabled { background: #ddd; color: #999; cursor: not-allowed; } .buzzer-btn { background: var(--accent); color: #141c34; font-size: 4.8em; padding: 70px 160px; border-radius: 160px; font-weight: 900; letter-spacing: 0.10em; margin: 40px auto 36px auto; border: 12px solid #fff; box-shadow: 0 14px 64px #ffea6fcc; cursor: pointer; user-select:none; max-width: 90vw; display: block; } .buzzer-btn:disabled { background: #eee; color: #888; border-color: #ccc; cursor: not-allowed; box-shadow: none; } .scoreboard { background: #222947; border-radius: var(--radius); box-shadow: 0 2px 16px #0006; padding: 20px 14px; margin: 28px auto; max-width: 720px; min-width: 320px; } table { border-collapse: collapse; color: #fff; width: 100%; } thead tr { background: var(--primary); } th, td { padding: 14px 10px; border: 1px solid #1a2138; text-align: center; } tbody tr:nth-child(odd) { background: #2a2f4b; } tbody tr:hover { background-color: #3b8bee93; } .buzzed-tag { background: var(--accent); color: #232323; border-radius: 14px; padding: 6px 14px; font-size: 1.1em; user-select:none; font-weight: 700; } #buzz-lock-msg { color: var(--accent); font-weight: 700; margin-top: 15px; font-size: 1.3em; text-align: center; } #buzzed-who { font-size: 1.8em; color: var(--accent); margin: 30px 0 24px 0; text-align: center; font-weight: 700; } #question-text, #player-question-text { font-size: 2.9em; font-weight: 900; margin: 30px auto 24px auto; text-align: center; max-width: 90vw; word-break: break-word; } #question-img, #player-question-img { max-width: 90vw; max-height: 400px; border-radius: 24px; margin: 0 auto 30px auto; display: block; object-fit: contain; } .backbtn { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); font-size: 1.3em; padding: 12px 40px; border-radius: 44px; background: #364063; color: white; border: none; cursor: pointer; box-shadow: 0 5px 16px #000a; user-select:none; z-index: 999; transition: background 0.3s ease; } .backbtn:hover { background: var(--accent); color: #232323; } .center-box { background: #2b3250; border-radius: 24px; box-shadow: 0 5px 36px #222b47; max-width: 720px; width: 95%; padding: 30px 30px; margin: 0 auto 50px auto; display: flex; flex-direction: column; align-items: center; } .avatar-preview { width: 72px; height: 72px; border-radius: 50%; margin-bottom: 20px; object-fit: cover; box-shadow: 0 0 8px #0008; } </style> </head> <body>
<button class="backbtn" id="backbtn" style="display:none;" onclick="backButtonHandler()">‚Üê Back</button>

<div id="modal" style="position: fixed; top: 20px; left:50%; transform: translateX(-50%); padding: 16px 28px; background: #ffcf46cc; border-radius: 14px; color: #232323; font-weight: 700; display:none; user-select:none; z-index:10000;"></div> <!-- Login Page --> <div id="page-login" class="page show"> <div class="center-box"> <h1>Login</h1> <input type="text" id="login-username" placeholder="Username" autocomplete="off" maxlength="24" /> <input type="password" id="login-password" placeholder="Password" maxlength="24" /> <button onclick="loginUser()">Login</button> <button onclick="showRegister()">Register</button> <div id="footer">DEVELOPED BY AMUTAN GROUP</div> </div> </div> <!-- Register Page --> <div id="page-register" class="page"> <div class="center-box"> <h1>Register</h1> <input type="text" id="register-username" placeholder="Username" autocomplete="off" maxlength="24" /> <input type="password" id="register-password" placeholder="Password" maxlength="24" /> <input type="email" id="register-email" placeholder="Email" /> <input type="file" id="register-avatar" accept="image/*" /> <img id="register-avatar-preview" class="avatar-preview" style="display:none;" /> <button onclick="registerUser()">Register</button> <button onclick="showLogin()">Back</button> <div id="footer">DEVELOPED BY AMUTAN GROUP</div> </div> </div> <!-- Home Page --> <div id="page-home" class="page"> <div class="center-box"> <h2>Welcome, <span id="welcome-user"></span>!</h2> <button onclick="hostPage()">Host Game</button> <button onclick="joinPage()">Join Game</button> <button onclick="showProfile()">Profile</button> <button onclick="adminPanel()" id="adminUserBtn" style="display:none;">Admin Panel</button> <div id="footer">DEVELOPED BY AMUTAN GROUP</div> </div> </div> <!-- Profile Page --> <div id="page-profile" class="page"> <div class="center-box"> <h2>Your Profile</h2> <img id="profile-avatar-preview" class="avatar-preview" style="display:none;" /> <input type="text" id="profile-nickname" placeholder="Nickname" maxlength="24" /> <input type="password" id="profile-password" placeholder="New Password" maxlength="24" /> <input type="email" id="profile-email" placeholder="Email" /> <input type="file" id="profile-avatar" accept="image/*" /> <button onclick="updateProfile()">Save Changes</button> <button onclick="showHome()">Back</button> <div id="footer">DEVELOPED BY AMUTAN GROUP</div> </div> </div> <!-- Admin User Management --> <div id="page-users" class="page"> <div class="center-box"> <h2>User Management <span style="color:#ffe05b">(Admin)</span></h2> <table> <thead><tr><th>Avatar</th><th>Username</th><th>Email</th><th>Role</th><th>Delete</th></tr></thead> <tbody id="userlist"></tbody> </table> <input type="text" id="create-username" placeholder="New Username" /> <input type="password" id="create-password" placeholder="New Password" /> <input type="email" id="create-email" placeholder="Email" /> <input type="file" id="create-avatar" accept="image/*" /> <img id="create-avatar-preview" class="avatar-preview" style="display:none;" /> <button onclick="createUser()">Create User</button> <button onclick="showHome()">Back</button> <div id="footer">DEVELOPED BY AMUTAN GROUP</div> </div> </div> <!-- Host Page --> <div id="page-host" class="page"> <div class="center-box"> <h2>Host Game</h2> <label>Game Code:</label><br /> <input type="text" id="host-code" readonly /><br /> <button onclick="startGame()">Start Game</button> <button onclick="showHome()">Back</button> <div id="footer">DEVELOPED BY AMUTAN GROUP</div> </div> </div> <!-- Admin Panel --> <div id="page-admin-panel" class="page"> <div class="center-box"> <h2>Admin Control</h2> <div><b>Game Code:</b> <span id="roomcode"></span></div> <div><b>Round:</b> <span id="round-label"></span></div> <div id="question-holder"> <div id="question-text"></div> <img id="question-img" alt="Question Image" /> </div> <input type="text" id="admin-question-input" placeholder="Enter question here" /><br /> <input type="file" id="admin-image-file" accept="image/*" /><br /> <img id="admin-image-preview" style="display:none; max-width: 100%; max-height: 250px; margin-bottom: 14px;" /> <div style="display:flex; flex-wrap:wrap; gap: 14px; margin-bottom: 20px;"> <button onclick="resetBuzzers()">Reset Buzzer</button> <button onclick="resetRound()">Reset Round</button> <button onclick="nextRound()">Next Round</button> </div> <table id="admin-scores" style="width: 100%; background: #222947; color:#fff; border-radius: 14px;"></table> <div id="buzzed-who" style="margin-top: 22px;"></div> <button onclick="showHome()" style="margin-top: 16px;">Exit Admin Panel</button> <div id="footer">DEVELOPED BY AMUTAN GROUP</div> </div> </div> <!-- Join Game --> <div id="page-join" class="page"> <div class="center-box"> <h2>Join Game</h2> <input type="text" id="join-code" maxlength="6" placeholder="Game Code" autocomplete="off" /><br /> <input type="text" id="join-team" maxlength="24" placeholder="Team Name (optional)" /><br /> <button onclick="joinGame()">Join</button> <button onclick="showHome()">Back</button> <div id="footer">DEVELOPED BY AMUTAN GROUP</div> </div> </div> <!-- Player Page --> <div id="page-player" class="page"> <div class="center-box"> <h2>Quiz Buzzer</h2> <img id="player-avatar-preview" style="width: 80px; height: 80px; border-radius: 50%; margin-bottom: 18px; display:none;" /> <div style="color: #ffe05b; font-weight: 700; font-size: 1.4em; margin-bottom: 10px;"> Hello, <span id="pl-name"></span>! </div> <div><b>Game Code:</b> <span id="pl-room"></span></div> <div><b>Team:</b> <span id="pl-team"></span></div> <div id="player-question-text" style="font-size: 2.5em; font-weight: 700; margin: 30px 0 15px 0; max-width: 90vw; text-align: center;"></div> <img id="player-question-img" src="" alt="Player Question Image" style="display:none; max-width: 90vw; max-height: 350px; border-radius: 20px; margin-bottom: 25px;" /> <button id="player-buzzer" class="buzzer-btn" onclick="buzz()">BUZZ!</button> <div id="buzz-lock-msg"></div> <div class="scoreboard" id="player-scores"></div> <button onclick="showHome()" style="margin-top: 20px;">Leave Game</button> <div id="footer">DEVELOPED BY AMUTAN GROUP</div> </div> </div>
<audio id="buzz-audio" src="https://cdn.pixabay.com/audio/2022/10/16/audio_12d3b2760e.mp3" preload="auto"></audio>

<script> // Firebase Initialization const firebaseConfig = { apiKey: "AIzaSyBHvyZyATvhJ1pMx-kV-_ZXFwXPb54VspI", authDomain: "buzzer-a0d53.firebaseapp.com", databaseURL: "https://buzzer-a0d53-default-rtdb.asia-southeast1.firebasedatabase.app", projectId: "buzzer-a0d53", storageBucket: "buzzer-a0d53.appspot.com", messagingSenderId: "29031182202", appId: "1:29031182202:web:447d951b38be59b29270c3", measurementId: "G-NP0DMX7TKJ" }; firebase.initializeApp(firebaseConfig); const db = firebase.database(); let gameID = "", myRole = "", myUser = "", myTeam = "", myPID = "", buzzLockSoundPlayed = false; let pageHistory = []; // Navigation and Back button logic function showPage(id) { document.querySelectorAll(".page").forEach(p => p.classList.remove("show")); document.getElementById(id).classList.add("show"); document.getElementById("backbtn").style.display = (id === "page-login") ? "none" : "inline-block"; } function backButtonHandler() { if (pageHistory.length > 1) { pageHistory.pop(); showPage(pageHistory[pageHistory.length - 1]); } } function navigateToPage(id) { if (pageHistory.length === 0 || pageHistory[pageHistory.length - 1] !== id) { pageHistory.push(id); } showPage(id); } function showRegister() { navigateToPage("page-register"); } function showLogin() { navigateToPage("page-login"); } function showHome() { document.getElementById("welcome-user").textContent = myUser; document.getElementById("adminUserBtn").style.display = myUser === "admin" ? "inline-block" : "none"; navigateToPage("page-home"); } function showProfile() { db.ref("users/" + myUser).get().then(snap => { const user = snap.val(); if (user && user.avatar) { const avatar = document.getElementById("profile-avatar-preview"); avatar.src = user.avatar; avatar.style.display = "block"; } else { document.getElementById("profile-avatar-preview").style.display = "none"; } document.getElementById("profile-nickname").value = myUser; document.getElementById("profile-password").value = ""; document.getElementById("profile-email").value = (user && user.email) || ""; navigateToPage("page-profile"); }); } function showModal(msg, t = 1800) { const modal = document.getElementById("modal"); modal.textContent = msg; modal.style.display = "block"; setTimeout(() => modal.style.display = "none", t); } // Avatar previews handlers document.getElementById("register-avatar").onchange = function () { let file = this.files; if (file) { let reader = new FileReader(); reader.onload = e => { let preview = document.getElementById("register-avatar-preview"); preview.src = e.target.result; preview.style.display = "block"; }; reader.readAsDataURL(file); } }; document.getElementById("profile-avatar").onchange = function () { let file = this.files; if (file) { let reader = new FileReader(); reader.onload = e => { let preview = document.getElementById("profile-avatar-preview"); preview.src = e.target.result; preview.style.display = "block"; }; reader.readAsDataURL(file); } }; document.getElementById("create-avatar").onchange = function () { let file = this.files; if (file) { let reader = new FileReader(); reader.onload = e => { let preview = document.getElementById("create-avatar-preview"); preview.src = e.target.result; preview.style.display = "block"; }; reader.readAsDataURL(file); } }; // User registration & login function registerUser() { const username = document.getElementById("register-username").value.trim(); const pw = document.getElementById("register-password").value.trim(); const email = document.getElementById("register-email").value.trim(); const avatarFile = document.getElementById("register-avatar").files; if (!username || !pw || !email) return showModal("Fill all fields."); if (username === "admin") return showModal("Username 'admin' is reserved."); db.ref("users/" + username).get().then(snap => { if (snap.exists()) return showModal("Username already exists."); if (avatarFile) { let reader = new FileReader(); reader.onload = e => { db.ref("users/" + username).set({ pw, email, role: "user", avatar: e.target.result }).then(() => { showModal("Registered! Please login.", 1600); setTimeout(showLogin, 1500); }); }; reader.readAsDataURL(avatarFile); } else { db.ref("users/" + username).set({ pw, email, role: "user", avatar: "" }).then(() => { showModal("Registered! Please login.", 1600); setTimeout(showLogin, 1500); }); } }); } function loginUser() { const username = document.getElementById("login-username").value.trim(); const pw = document.getElementById("login-password").value.trim(); if (!username || !pw) return showModal("Enter username and password."); if (username === "admin" && pw === "24207") { myUser = "admin"; showHome(); return; } db.ref("users/" + username).get().then(snap => { if (!snap.exists()) return showModal("User not found."); const user = snap.val(); if (user.pw !== pw) return showModal("Incorrect password."); myUser = username; showHome(); }); } function updateProfile() { const nickname = document.getElementById("profile-nickname").value.trim(); const password = document.getElementById("profile-password").value.trim(); const email = document.getElementById("profile-email").value.trim(); const avatarFile = document.getElementById("profile-avatar").files; const updateObj = {}; if (password) updateObj.pw = password; if (email) updateObj.email = email; if (avatarFile) { let reader = new FileReader(); reader.onload = e => { updateObj.avatar = e.target.result; db.ref("users/" + myUser).update(updateObj).then(() => { showModal("Profile updated.", 1400); showHome(); }); }; reader.readAsDataURL(avatarFile); } else { db.ref("users/" + myUser).update(updateObj).then(() => { showModal("Profile updated.", 1400); showHome(); }); } } // Admin user management function adminPanel() { if (myUser !== "admin") return; reloadUsers(); navigateToPage("page-users"); } function reloadUsers() { db.ref("users").get().then(snap => { let html = ""; snap.forEach(u => { const data = u.val(); html += `<tr> <td>${data.avatar ? `<img src="${data.avatar}" style="width:50px; height:50px; border-radius:50%;">` : ""}</td> <td style="color:#ffe05b;">${u.key}</td> <td>${data.email || ""}</td> <td>${data.role || "user"}</td> <td>${u.key !== "admin" ? `<button onclick="deleteUser('${u.key}')">Delete</button>` : ""}</td> </tr>`; }); document.getElementById("userlist").innerHTML = html; }); } function createUser() { const username = document.getElementById("create-username").value.trim(); const pw = document.getElementById("create-password").value.trim(); const email = document.getElementById("create-email").value.trim(); const avatarFile = document.getElementById("create-avatar").files; if (!username || !pw || !email) return showModal("Fill all fields."); db.ref("users/" + username).get().then(snap => { if (snap.exists()) return showModal("Username already exists."); if (avatarFile) { const reader = new FileReader(); reader.onload = e => { db.ref("users/" + username).set({ pw, email, role: "user", avatar: e.target.result }).then(() => { showModal("User created.", 1400); reloadUsers(); }); }; reader.readAsDataURL(avatarFile); } else { db.ref("users/" + username).set({ pw, email, role: "user", avatar: "" }).then(() => { showModal("User created.", 1400); reloadUsers(); }); } }); } function deleteUser(username) { if (username === "admin") return; db.ref("users/" + username).remove().then(reloadUsers); } // Host/Admin game panel function hostPage() { navigateToPage("page-host"); const code = String(Math.floor(Math.random() * 900000 + 100000)); document.getElementById("host-code").value = code; gameID = code; db.ref("games/" + code).set({ created: Date.now(), status: "waiting", round: 1, question: "", image: "", players: {}, buzzed: "" }); myRole = "admin"; } function startGame() { db.ref("games/" + gameID).update({ status: "live", round: 1 }); navigateToPage("page-admin-panel"); document.getElementById("roomcode").textContent = gameID; readAdmin(); listenQuestionAdmin(); } document.getElementById("admin-image-file").addEventListener("change", e => { const preview = document.getElementById("admin-image-preview"); const file = e.target.files; if (!file) { preview.style.display = "none"; preview.src = ""; return; } const reader = new FileReader(); reader.onload = ev => { preview.src = ev.target.result; preview.style.display = "block"; }; reader.readAsDataURL(file); }); function uploadQuestion() { const question = document.getElementById("admin-question-input").value.trim(); const imgInput = document.getElementById("admin-image-file"); const imgFile = imgInput.files; if (!question) return showModal("Enter a question"); if (imgFile) { const reader = new FileReader(); reader.onload = e => { db.ref("games/" + gameID).update({ question, image: e.target.result }); imgInput.value = ""; document.getElementById("admin-image-preview").style.display = "none"; document.getElementById("admin-question-input").value = ""; showModal("Question and Image uploaded!", 1300); }; reader.readAsDataURL(imgFile); } else { db.ref("games/" + gameID).update({ question, image: "" }); document.getElementById("admin-question-input").value = ""; showModal("Question uploaded!", 1200); } } function resetBuzzers() { db.ref(`games/${gameID}/players`).get().then(snap => { const players = snap.val() || {}; Object.keys(players).forEach(pid => { db.ref(`games/${gameID}/players/${pid}`).update({ buzzed: false }); }); }); db.ref(`games/${gameID}`).update({ buzzed: "" }); buzzLockSoundPlayed = false; } function resetRound() { db.ref(`games/${gameID}/players`).get().then(snap => { const players = snap.val() || {}; Object.keys(players).forEach(pid => { db.ref(`games/${gameID}/players/${pid}`).update({ buzzed: false, score: 0 }); }); }); db.ref(`games/${gameID}`).update({ buzzed: "" }); buzzLockSoundPlayed = false; } function nextRound() { db.ref(`games/${gameID}`).get().then(snap => { let r = (snap.val() && snap.val().round) || 1; db.ref(`games/${gameID}`).update({ round: r + 1, buzzed: "" }); resetRound(); }); } function adminScore(delta, pid) { db.ref(`games/${gameID}/players/${pid}`).get().then(s => { let v = s.val(); db.ref(`games/${gameID}/players/${pid}`).update({ score: (v.score || 0) + delta }); }); } function readAdmin() { db.ref(`games/${gameID}`).on("value", snap => { const g = snap.val() || {}; document.getElementById("round-label").textContent = g.round || 1; document.getElementById("question-text").textContent = g.question || ""; const imgTag = document.getElementById("question-img"); if (g.image) { imgTag.src = g.image; imgTag.style.display = "block"; } else { imgTag.style.display = "none"; } const players = g.players || {}; let arr = Object.entries(players).map(([id, v]) => ({ ...v, id })); arr.sort((a, b) => (b.score || 0) - (a.score || 0)); const buzzedID = g.buzzed; const buzzedPlayer = arr.find(x => x.id === buzzedID); let who = buzzedPlayer ? `<span class="buzzed-tag">üîî ${buzzedPlayer.name}</span>` : ""; document.getElementById("buzzed-who").innerHTML = who; let html = `<thead><tr><th>Rank</th><th>Player</th><th>Score</th><th>Admin Score Controls</th><th>Status</th></tr></thead><tbody>`; arr.forEach((pl, i) => { html += `<tr> <td>${i + 1}</td> <td style="color:#ffe05b; font-weight:700;">${pl.name}${pl.team ? ' (' + pl.team + ')' : ''}</td> <td>${pl.score || 0}</td> <td> <button onclick="adminScore(25, '${pl.id}')">+25</button> <button onclick="adminScore(-25, '${pl.id}')">-25</button> </td> <td>${pl.id === buzzedID ? '<span class="buzzed-tag">Buzzed</span>' : ''}</td> </tr>`; }); html += `</tbody>`; document.getElementById("admin-scores").innerHTML = html || "<tbody><tr><td colspan='5'>No players yet</td></tr></tbody>"; }); } function listenQuestionAdmin() { db.ref(`games/${gameID}`).on("value", snap => { const g = snap.val() || {}; document.getElementById("question-text").textContent = g.question || ""; const imgTag = document.getElementById("question-img"); if (g.image) { imgTag.src = g.image; imgTag.style.display = "block"; } else { imgTag.style.display = "none"; } }); } function joinPage() { navigateToPage("page-join"); } function joinGame() { let code = document.getElementById("join-code").value.trim(); let team = document.getElementById("join-team").value.trim(); if (!/^\d{6}$/.test(code)) return showModal("Enter 6 digit game code", 1600); if (!myUser) return showModal("Please login first", 1600); gameID = code; myTeam = team; myRole = "player"; let myid = btoa(myUser + Math.random()).replace(/=/g, ""); myPID = myid; db.ref(`games/${code}`).get().then(snap => { if (!snap.exists()) return showModal("Game not found", 1400); db.ref(`users/${myUser}`).get().then(userSnap => { let avatar = (userSnap.val() && userSnap.val().avatar) || ""; db.ref(`games/${code}/players/${myid}`).set({ name: myUser, team, score: 0, buzzed: false, joined: Date.now(), avatar }).then(() => { document.getElementById("pl-name").textContent = myUser; const avatarPreview = document.getElementById("player-avatar-preview"); if (avatar) { avatarPreview.src = avatar; avatarPreview.style.display = "block"; } else { avatarPreview.style.display = "none"; } document.getElementById("pl-room").textContent = code; document.getElementById("pl-team").textContent = team || "(no team)"; navigateToPage("page-player"); listenPlayer(); listenQuestionPlayer(); }); }); }); } function listenPlayer() { db.ref(`games/${gameID}`).on("value", snap => { const g = snap.val() || {}; document.getElementById("buzz-lock-msg").textContent = g.buzzed ? "Buzzer is locked!" : ""; const players = g.players || {}; let arr = Object.entries(players).map(([id, v]) => ({ ...v, id })); arr.sort((a, b) => (b.score || 0) - (a.score || 0)); const buzzedID = g.buzzed; let html = ""; arr.forEach((pl, i) => { html += `<div class="score-row"> <span class="rank">${i + 1}</span> <span class="pname" style="color:#ffe05b;">${pl.name}${pl.team ? ' (' + pl.team + ')' : ''}</span> <span class="pscore">${pl.score || 0}</span> ${pl.id === buzzedID ? '<span class="buzzed-tag">Buzzed</span>' : ''} </div>`; }); document.getElementById("player-scores").innerHTML = html || "(no players yet)"; const buzzerPressed = buzzedID; const playerBtn = document.getElementById("player-buzzer"); playerBtn.disabled = buzzerPressed && buzzerPressed !== myPID; if (buzzerPressed && !buzzLockSoundPlayed) { const audio = document.getElementById("buzz-audio"); audio.currentTime = 0; audio.play(); buzzLockSoundPlayed = true; } if (!buzzerPressed) buzzLockSoundPlayed = false; }); } function listenQuestionPlayer() { db.ref(`games/${gameID}`).on("value", snap => { const g = snap.val() || {}; document.getElementById("player-question-text").textContent = g.question || ""; const imgTag = document.getElementById("player-question-img"); if (g.image) { imgTag.src = g.image; imgTag.style.display = "block"; } else { imgTag.style.display = "none"; } }); } function buzz() { db.ref(`games/${gameID}`).get().then(snap => { const g = snap.val(); if (!g || g.buzzed) return showModal("Buzzer is locked!", 1200); db.ref(`games/${gameID}/players/${myPID}`).update({ buzzed: true }); db.ref(`games/${gameID}`).update({ buzzed: myPID }); }); } </script> </body> </html>
